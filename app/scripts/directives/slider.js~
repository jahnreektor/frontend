(function () {
  'use strict';
  angular.module('frontendApp').directive('sliderChart', function () {
    return {
      restrict: 'EA',
      scope: {
        startDate: '=',
        endDate: '=',
        minDate: '=',
        maxDate: '='
      },
      link: function (scope, element, attrs) {

        scope.$watch('startDate', function(){
            render();
        });
        
        var render = _(function(){
            
            if (!scope.startDate || !scope.endDate || !etc.) {
              return;
            }
            
          element.empty();
          // d3 code goes
          
          // requesting data

          // brush change handler?
          var changeHandler = function() {
              scope.startDate = newValue;
          }          
        }).throttle(250);

      }
    };
  });

}).call(this);

/*
(function () {
  'use strict';
  angular.module('frontendApp').directive('bubbleChart', function () {
    return {
      restrict: 'EA',
      scope: {
        donations: '=',
        colorMap: '='
      },
      link: function (scope, element, attrs) {

        scope.$watch('donations', function(){
          if (scope.donations && !_(scope.donations).isEmpty()) {
            render();
          }
        });

        var render = function(){
          var width = 1170;
          var height = 800;

          var colorMap = function(d) {
            return scope.colorMap[d.category];
          };

          var bubble = d3.layout.pack()
            .sort(null)
            .size([width, height])
            .padding(1.5);

          var svg = d3.select(element[0]).append('svg')
            .attr('width', width)
            .attr('height', height)
            .attr('class', 'bubble');

          var node = svg.selectAll('.node')
            .data(bubble.nodes(scope.donations)
            .filter(function(d){
              return d.depth > 0;
            }))
            .enter().append('g')
            .attr('class', 'node')
            .attr('transform', function(d) {
              return 'translate(' + d.x + ',' + d.y + ')';
            });

          node.append('title')
            .text(function(d) {
              return d.category + ': ' + d.value;
            });

          node.append('circle')
            .attr('r', function(d) { return d.r; })
            .style('fill', colorMap);

          node.append('text')
            .attr('dy', '.3em')
            .style('text-anchor', 'middle')
            .text(function(d) { return d.category; });
        };

      }
    };
  });

}).call(this);

*/
